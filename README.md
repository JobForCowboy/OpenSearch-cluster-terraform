# Terraform-модуль для кластера OpenSearch в Yandex Cloud

## Описание

Модуль автоматизирует создание виртуальных машин в Yandex Cloud для кластера [OpenSearch](https://opensearch.org/), включая подготовку сети, дисков и всех основных параметров для работы кластера.

## Что создает модуль

- Виртуальные машины (VM) с заданными ресурсами (CPU, RAM, диск)
- Сетевую инфраструктуру (VPC и подсети через внешний модуль)
- Публичные и приватные IP-адреса
- Загрузочные диски

## Используемые провайдеры

- `yandex` (>= 0.35.0)
- `aws` (~> 5.70.0) — только для совместимости

## Входные параметры

| Параметр            | Описание                                              | Тип     | Обязателен | Значение по умолчанию            |
|---------------------|-------------------------------------------------------|---------|------------|----------------------------------|
| `folder_id`         | ID папки Yandex Cloud                                 | string  | да         | —                                |
| `ssh_public_key`    | Путь к публичному SSH-ключу                           | string  | да         | —                                |
| `instance_count`    | Количество виртуальных машин                          | number  | нет        | 3                                |
| `instance_resources`| Ресурсы VM (CPU, RAM, диск)                           | object  | нет        | см. пример ниже                  |
| `image_id`          | ID образа для загрузочного диска                      | string  | нет        | "fd83m7rp3r4l12c2keph"           |
| `ssh_user`          | Пользователь для SSH                                  | string  | нет        | "ubuntu"                         |
| `name_prefix`       | Префикс для имен ресурсов                             | string  | нет        | "project"                        |
| `zone`              | Зона размещения VM                                    | string  | нет        | "ru-central1-a"                  |

**Пример значения `instance_resources`:**

```hcl
instance_resources = {
  platform_id = "standard-v3"
  cores       = 2
  memory      = 4
  disk = {
    disk_type = "network-ssd"
    disk_size = 30
  }
}
